---
##### This example file was generated by Ansible #####
- name: create content view cv-server-rhel7
  katello_content_view:

    username: "{{ satellite_admin_username }}"
    password: "{{ satellite_admin_password }}"
    validate_certs: false
    server_url: "https://satellite01.josh.lab.msp.redhat.com"
    organization: "josh"
    name: "cv-server-rhel7"
    repositories:
      - name: "Red Hat Enterprise Linux 7 Server RPMs x86_64 7Server"
        product: "Red Hat Enterprise Linux Server"
      - name: "Red Hat Satellite Tools 6.6 for RHEL 7 Server RPMs x86_64"
        product: "Red Hat Enterprise Linux Server"
  delegate_to: localhost
  register: publish_content_view

- name: include tasks to publish new version of cv-server-rhel7
  include_tasks: "/ansible-public/satellite6-deployment/roles/satellite/tasks/publish-content-view.yml"
  vars:
    content_view: cv-server-rhel7
  when:
    - publish_content_view is defined
    - publish_content_view.changed

